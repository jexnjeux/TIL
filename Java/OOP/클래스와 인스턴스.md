# 클래스와 인스턴스

## 객체지향 언어

기존의 프로래밍 언어에 몇 가지 새로운 규칙을 추가한 형태

### 장점

- 재사용성
- 유지 보수 용이
- 중복코드 제거

## 클래스

객체를 정의해 놓은 것(설계도)

### 용도

객체를 생성하는데 사용

## 객체

실제로 존재하는 사물 또는 개념으로 모든 인스턴스를 대표하는 포괄적인 의미를 가짐

### 용도

객체가 가지고 있는 기능, 속성에 따라 다름

### 구성요소

- 속성(멤버 변수)
- 기능(메서드)

## 인스턴스

어떤 클래스로부터 만들어진 것인지를 강조하며 보다 구체적인 의미를 갖는 객체

> **설계도**는 제품을 생성하기 위해 필요하다. 실제 사용되는 것은 **제품(객체)** 이다. 설계도를 **인스턴스화**해서 제품을 만들어야 사용가능하다.

### 사용 순서

인스턴스는 참조변수를 통해서만 다룰 수 있다.

1. 클래스 작성

```java
public class SteamIron{
  boolean power;
  int stage;

  void power() {
    power = !power;
  }

  void stageUp(){
    ++stage;
  }

  void stageDown() {
    --stage;
  }
}
```

2. 클래스의 객체를 참조하기 위해 클래스 타입의 참조변수 선언
3. 연산자 `new`를 사용해 클래스의 인스턴스를 메모리의 빈 공간에 생성
4. 대입연산자를 사용해 생성된 객체의 주소값을 참조변수에 저장 (참조변수와 객체 연결)

```java
SteamIron steamIron = new SteamIron();
```

5. 인스턴스 사용(변수/메서드 사용)

```java
steamIron.power();
steamIron.stage = 3;
steamIron.stageDown();
```

> **참조변수에는 하나의 값(주소)만 저장될 수 있다.**
>
> 하나의 인스턴스를 둘 이상의 참조변수가 참조하는 것 - 가능<br/>
> 하나의 참조변수가 둘 이상의 인스턴스를 참조하는 것 - 불가능

## 클래스의 또 다른 정의

### 데이터와 함수의 결합

객체지향 언어에서는 변수와 함수를 하나의 클래스에 정의하여 서로 관계 있는 변수와 함수를 함께 다룰 수 있도록 한다.

> **변수**: 하나의 데이터를 저장할 수 있는 공간<br/> > **배열**: 같은 종류의 여러 데이터를 하나의 집합으로 저장할 수 있는 공간<br/> > **구조체**: 서로 관련된 데이터를 종류에 관계없이 하나의 집합으로 저장할 수 있는 공간<br/> > **클래스**: 데이터와 함수의 결합(구조체 + 함수)

### 사용자 정의 타입

서로 관련된 변수들을 묶어서 하나의 타입으로 새로 추가하는 것을 사용자 정의 타입이라고 한다.

시간을 표현하기 위해 다음과 같이 3개의 변수를 선언한다.

```java
// 시간, 분, 초를 표현하기 위한 변수
int hour;
int minute;
int second;
```

만약 3개의 시간을 다뤄야 한다면 다음과 같이 변수들이 필요하다.

```java
int hour1, hour2, hour3;
int minute1, minute2, minute3;
int second1, minue2, minute3;
```

다뤄야 하는 시간의 개수가 늘어날 때마다 배열을 이용하여 관리하면 매번 변수를 새로 선언하는 불편함이 사라진다.

```java
int[] hours = new int[3];
int[] minutes = new int[3];
int[] seconds = new int[3];
```

하지만 하나의 시간을 구성하는 시, 분, 초가 서로 다른 배열로 분리되어있어 프로그램 수행 과정에서 불편함을 겪게된다.
이를 해결하기 위해 시, 분, 초를 하나로 묶는 클래스(사용자 정의 타입)를 정의하여 사용할 수 있다.

```java
class Time {
  int hour;
  int minute;
  int second;
}
```

## 변수

### 선언 위치에 따른 변수의 종류

| 변수 종류     | 선언 위치   | 생성 시기                                 | 특징                                                         |
| ------------- | ----------- | ----------------------------------------- | ------------------------------------------------------------ |
| 클래스 변수   | 클래스 영역 | 클래스가 메모리에 올라갈 때 자동으로 생성 | 인스턴스 변수 앞에 `static`<br/> 인스턴스 생성없이 사용 가능 |
| 인스턴스 변수 | 클래스 영역 | 인스턴스가 생성되었을 때                  | 인스턴스를 생성해야 사용 가능                                |
| 지역 변수     | 메서드 영역 | 변수 선언문이 수행되었을 때               | 메서드 종료되면 소멸                                         |

> **인스턴스 변수**는 인스턴스가 생성될 때마다 생성되므로 인스턴스마다 각기 다른 값을 유지할 수 있다. 그러나 **클래스 변수**는 모든 인스턴하가 하나의 저장공간을 공유하므로 항상 공통된 값을 갖는다.

## 메서드

### 정의

메서드는 특정 작업을 수행하는 일련의 문장들을 하나로 묶은 것으로, 어떤 값을 입력하면 이 값으로 작업을 수행해서 그 결과를 반환한다.

### 사용 이유

- 높은 재사용성
- 중복된 코드 제거
  - 반복되는 코드 대신 메서드 사용 가능
  - 코드의 중복이 제거되면 관리가 쉽고 오류의 발생 가능성이 낮아짐
- 프로그램의 구조화
  - 코드를 작업 단위로 나누어 메서드를 생성해, 프로그램의 구조를 단순화시킬 수 있음

### 구성

- 선언부
- 구현부

#### 메서드 선언부

선언부는 메서드의 이름, 매개변수 선언, 반환타입으로 구성되어있다.
메서드가 작업을 수행하기 위해 어떤 값들을 필요로 하고 작업의 결과로 어떤 타입의 값을 반환하는지에 대한 정보를 제공한다.

### 메서드 구현부

구현부는 메서드를 호출했을 때 수행될 문장들로 구성되어있다.

### 호출

```java
class MyMath {
  long add(long a, long b) {
    return a + b;
  }

  long subtract(long a, long b) {
    return a - b;
  }

  long multiply(long a, long b) {
    return a * b;
  }

  double divide(long a, long b) {
    return a / b;
  }

}
```

1. 인스턴스를 생성한다.

```java
MyMath mm = new MyMath();
```

2. 메서드를 호출한다.

```java
long value = mm.add(1L, 2L);
```

3. add 메서드를 호출한다. 인자 `1L`, `2L`은 add 메서드의 매개변수 `a`, `b`에 각각 대입된다.
4. add 메서드의 구현부가 수행된다.
5. return 문을 만나 호출한 메서드(`long value = mm.add(1L, 2L);`)로 되돌아와서 이후의 문장들을 실행한다.

## 매개변수

### 기본형 매개변수

기본형 매개변수는 변수의 값을 읽기만 할 수 있다.

### 참조형 매개변수

참조형 매개변수는 변수의 값을 읽고 변경할 수 있다.

> **참조**
>
> 자바의 정석 3rd Edition
